# Network - NAT(Network Addres Translation)

---

## NAT(Network Address Translation)

**주소 변환 프로토콜, NAT**

- 사설 네트워크에서 외부 통신을 위해 사용되는 프로토콜
- 공유기를 통해 LTE 혹은 5G 연결된 장비는 NAT 기술을 이용해 외부 통신
- 라우터 혹은 L3 스위치에서도 사용되는 기술
- 방화벽 및 로드밸런서와 같은 세션 장비에서 사용

<br>

**NAT 주요 기능**

- 사설 아이피에서 공인 아이피로 변환
- 사설 아이피에서 또 다른 사설 아이피로 변환
- 공인 아이피에서 또 다른 공인 아이피로 변환
- IPv4에서 IPv6 변환, IPv6에서 IPv4 변환 ⇒ AFT도 NAT 기술 중 하나
- 가장 많이 사용되는 사례는 사설 아이피에서 공인 아이피로 변환할 때이다.

<br>

**NAT 장점**

- IPv4 주소 고갈 문제 솔루션으로 NAT 사용 (사설 아이피)
- 보안성을 강화한다. (외부에 IP 주소 체계를 숨긴다.)
- IP 주소 체계가 동일한 두 개의 네트워크간 통신 (더블 나트)
- 내부 서버 설정 변경을 최소화
- 공인 아이피 사용 비용 절약

<br>

**SNAT와 DNAT**

NAT 사용시 트래픽이 출발하는 시작 지점을 기준으로 구분되며, 어떠한 IP를 변환하는지에 따라서 두 가지로 구분된다.

- SNAT - 출발지 주소를 변경하는 NAT
- DNAT - 목적지 주소를 변경하는 NAT

<br>

**SNAT 사용 예**

- 사설 → 공인 변환
- 사설 아이피를 숨기기 위한 목적 (보안성 강화)
- 로드밸런서 구성에 따라 사용된다.

<br>

**DNAT 사용 예**

- 로드밸런서, 로드밸런싱이 구성된 서비스의 VIP를 실제 아이피로 DNAT
- 대외망 구성시 사용

<br>

**NAT 종류**

- **Dynamic NAT**
    - 여러 개의 사설 IP와 여러 개 혹은 공인 IP 주소를 필요에 따라서 동적으로 Mapping 한다. 즉, NAT 테이블의 변환 정보를 장비가 직접 생성하고 관리한다.
- **NAT-PAT**
    - 하나의 공인 아이피로 다수의 사설 아이피 Mapping
    - 포트 주소를 이용하여 식별한다.
- **Static NAT**
    - 하나의 사설 아이피와 하나의 공인 아이피 주소를 1:1로 Mapping
    - 사설 네트워크로 구성된 서버의 경우 외부에서 사용자들이 내부 서버로 접속할 수 있는 고정 아이피가 필요하므로, 이 때 정적 NAT 방식을 사용하여 외부에서 내부 네트워크로 접근한다.
